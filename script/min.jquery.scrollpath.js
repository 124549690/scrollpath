/* jQuery Scroll Path Plugin by Joel Besada (http://joelb.me/scrollpath). MIT LICENSED */
(function(h,o,k,J){function K(a,c){function w(a,c){e=Math.min(a,e);i=Math.min(c,i);b=Math.max(a,b);d=Math.max(c,d)}var t=0,g=0,j=0,b=0,d=0,e=0,i=0,p=[{method:"moveTo",args:[0,0]}],k=[],n={rotate:null,callback:null};this.rotate=function(a,w){if(E){for(var B=h.extend({},n,w),f=Math.abs(a-j),f=Math.round(f/c),b=(a-j)/f,m=1;m<=f;m++)k.push({x:t,y:g,rotate:j+b*m,callback:m===f?B.callback:null});j=a%(2*Math.PI)}};this.moveTo=function(a,c,B){var f=h.extend({},n,B);k.push({x:a,y:c,rotate:null!==f.rotate?
f.rotate:j,callback:f.callback});t=a;g=c;w(a,c);p.push({method:"moveTo",args:arguments})};this.lineTo=function(c,b,B){for(var f=h.extend({},n,B),e=c-t,m=b-g,d=Math.sqrt(e*e+m*m),d=Math.round(d/a),e=e/d,m=m/d,i=null!==f.rotate&&E,s=i?(f.rotate-j)/d:0,q=1;q<=d;q++)k.push({x:t+e*q,y:g+m*q,rotate:j+s*q,callback:q===d?f.callback:null});j=i?f.rotate:j;t=c;g=b;w(c,b);p.push({method:"lineTo",args:arguments})};this.arc=function(c,d,b,f,e,i,s){var o=h.extend({},n,s),v=c+Math.cos(f)*b,q=d+Math.sin(f)*b,z=c+
Math.cos(e)*b,A=d+Math.sin(e)*b,r,u=f;r=e;var D=i,x=F(u),l=F(r),y=Math.abs(x-l),C=2*Math.PI-y;r=D&&x<l||!D&&x>l||x===l&&u!==r?C:y;u=Math.round(b*r/a);r=r/u*(i?-1:1);x=(D=null!==o.rotate&&E)?(o.rotate-j)/u:0;l=1;for((t!==v||g!==q)&&this.lineTo(v,q);l<=u;l++)k.push({x:c+b*Math.cos(f+r*l),y:d+b*Math.sin(f+r*l),rotate:j+x*l,callback:l===u?o.callback:null});j=D?o.rotate:j;t=z;g=A;w(c+b,d+b);w(c-b,d-b);p.push({method:"arc",args:arguments})};this.getPath=function(){return k};this.getCanvasPath=function(){for(var a=
0;a<p.length;a++)p[a].args[0]-=this.getPathOffsetX(),p[a].args[1]-=this.getPathOffsetY();return p};this.getPathWidth=function(){return b-e+40};this.getPathHeight=function(){return d-i+40};this.getPathOffsetX=function(){return e-20};this.getPathOffsetY=function(){return i-20}}function L(){v.scrollBar&&(e=h("<div>").addClass("sp-scroll-bar").on("click",function(a){var c=Math.round(a.offsetY/e.height()*(g.length-1));5<Math.abs(c-d)&&(c=d+5*(c>d?1:-1));n(c);a.preventDefault();return!1}),s=h("<div>").addClass("sp-scroll-handle").on({click:function(a){a.preventDefault();
return!1},mousedown:function(a){y=!0;a.preventDefault();return!1}}),h(k).on({mouseup:function(){y=!1},mousemove:function(a){if(y){var a=a.clientY-e.offset().top,a=Math.round(a/e.height()*(g.length-1)),c=g.length-1;n(a>c?c:0>a?0:a)}}}),h("body").prepend(e.append(s)))}function M(){if(v.drawPath&&N){var a;a={position:"absolute","z-index":9998,left:b.getPathOffsetX(),top:b.getPathOffsetY(),"pointer-events":"none"};a[i+"user-select"]=a["user-select"]="none";a[i+"user-drag"]=a["user-drag"]="none";a=h("<canvas>").addClass("sp-canvas").css(a).prependTo(z);
a[0].width=b.getPathWidth();a[0].height=b.getPathHeight();a=a[0].getContext("2d");var c=b.getCanvasPath(),d=0;a.shadowBlur=15;a.shadowColor="black";a.strokeStyle="white";a.lineJoin="round";a.lineCap="round";for(a.lineWidth=10;d<c.length;d++)a[c[d].method].apply(a,c[d].args);a.stroke()}}function H(a){var c=a.originalEvent.wheelDelta||-a.originalEvent.detail,c=c/Math.abs(c);a.preventDefault();h(o).scrollTop(0).scrollLeft(0);A(-c)}function O(a){if(!/^text/.test(a.target.type))switch(a.keyCode){case 40:A(1);
break;case 38:A(-1);break;case 32:A(5*(a.shiftKey?-1:1))}}function A(a){a=d+a;if(v.wrapAround){for(;0>a;)a+=g.length;for(;a>=g.length;)a-=g.length}else a=a>g.length-1?g.length-1:0>a?0:a;n(a)}function n(a){var c=g[a].callback;z.css(P(g[a]));s&&s.css("top",a/(g.length-1)*(e.height()-s.height())+"px");c&&a!==d&&c();d=a}function P(a){var c=a.x-h(o).width()/2,d=a.y-h(o).height()/2,b={};0===F(a.rotate)?(b.left=-c,b.top=-d,b[i+"transform-origin"]=b["transform-origin"]="",b[i+"transform"]=b.transform=""):
(b.left=b.top="",b[i+"transform-origin"]=b["transform-origin"]=a.x+"px "+a.y+"px",b[i+"transform"]=b.transform="translate("+-c+"px, "+-d+"px) rotate("+a.rotate+"rad)");return b}function F(a){for(;0>a;)a+=2*Math.PI;return a%(2*Math.PI)}var i="-"+function(){var a=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,c=k.getElementsByTagName("script")[0],b;for(b in c.style)if(a.test(b))return b.match(a)[0];return"WebkitOpacity"in c.style?"Webkit":"KhtmlOpacity"in c.style?"Khtml":""}().toLowerCase()+"-",E=function(){for(var a=
k.createElement("dummy").style,b="transform,WebkitTransform,MozTransform,OTransform,msTransform,KhtmlTransform".split(","),d=0;d<b.length;d++)if(a[b[d]]!==J)return!0;return!1}(),N=!!k.createElement("canvas").getContext,I=!1,y=!1,d=0,b,g,z,e,s,C={scrollSpeed:50,rotationSpeed:Math.PI/15},v={wrapAround:!1,drawPath:!1,scrollBar:!0},G={init:function(a){(1<this.length||I)&&h.error("jQuery.scrollPath can only initialized on *one* element *once*");h.extend(v,a);I=!0;z=this;g=b.getPath();M();L();n(0);z.css("position",
"relative");h(k).on({mousewheel:H,DOMMouseScroll:H,keydown:O});h(o).on("resize",function(){n(d)});return this},getPath:function(a){h.extend(C,a);return b||(b=new K(C.scrollSpeed,C.rotationSpeed))}};h.fn.scrollPath=function(a){if(G[a])return G[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return G.init.apply(this,arguments);h.error("Method "+a+" does not exist on jQuery.scrollPath")}})(jQuery,window,document);